var com=com||{};com.cw=com.cw||{},com.cw.GoogleMap=function(o){"use strict";this.settings={$container:$(document),mapSettings:{zoom:8,center:{lat:51.165691,lng:10.451526},styles:{}},apiURL:"//maps.googleapis.com/maps/api/js?",apiVersion:void 0,apiKey:void 0,onMapLoaded:function(){}},$.extend(!0,this.settings,o);var e=this;this.initGoogleMaps=function(){this.googleMap=new google.maps.Map(this.settings.$container[0],this.settings.mapSettings),this.settings.onMapLoaded(this.googleMap)},this.addMarker=function(o){var e={map:this.googleMap,infoWindowHtml:"",toggleInfoWindow:!1},t=null,i=null;return $.extend(!0,e,o),t=new google.maps.Marker(e),e.toggleInfoWindow&&(i=new google.maps.InfoWindow({content:e.infoWindowHtml||""}),t.addListener("click",function(){i.isOpened?(i.isOpened=!1,i.open(null,null)):(i.open(e.map,this),i.isOpened=!0)})),t},this.googleMapsLoaded=function(){google.maps.event.addDomListener(window,"load",this.initGoogleMaps())},this.loadGoogleMaps=function(){if("google"in window)this.googleMapsLoaded();else{var o=this.settings.apiURL;this.settings.apiVersion&&(o+="v="+this.settings.apiVersion+"&"),this.settings.apiKey&&(o+="key="+this.settings.apiKey+"&"),o+="callback=gMapLoaded",$("<script></script>").attr("src",o).appendTo(document.head),window.gMapLoaded=function(){e.googleMapsLoaded()}}},"complete"===document.readyState?this.loadGoogleMaps():$(document).on("ready",function(){e.loadGoogleMaps()})};