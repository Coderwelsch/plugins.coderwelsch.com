var com=com||{};com.cw=com.cw||{},com.cw.ImageStack=function(t){"use strict";this.settings={$container:$(document),showAllImages:!0,imagesToShow:3,maxAngle:10,minWidth:60,maxWidth:70},$.extend(this.settings,t);var i=this,n=0,s=0;this.$imgContainer=this.settings.$container.find(".stack-content"),this.$images=this.$imgContainer.find("img"),this.$controls=this.settings.$container.find(".controls"),this.$LeftBtn=this.$controls.find(".left"),this.$rightBtn=this.$controls.find(".right"),this.init=function(){this.settings.showAllImages&&this.$images.each(this.showImage),this.setContentHeight()},this.bindEvents=function(){this.$controls.on("click",".left, .right",this.controlsClicked)},this.controlsClicked=function(t){$(t.currentTarget).hasClass("right")?i.nextImage():i.prevImage()},this.nextImage=function(){i.$imgContainer.find("img:first-child").before(i.$imgContainer.find("img:last-child"))},this.prevImage=function(){i.$imgContainer.find("img:last-child").after(i.$imgContainer.find("img:first-child"))},this.setContentHeight=function(){n=0,s=0,this.$images.each(function(t,i){var e=$(i),h=e[0].getBoundingClientRect().height;n=h>n?h:n,s=s<h-e.height()?h-e.height():s}),s/=2,this.$imgContainer.height(n),this.settings.$container.css("padding-top",s+"px")},this.generateRandomStylingForImage=function(t){var i=this.settings.minWidth+(100-this.settings.minWidth)*Math.random();i=i<this.settings.minWidth?this.settings.minWidth:i,i=i>this.settings.maxWidth?this.settings.maxWidth:i;var n=Math.random()*this.settings.maxAngle;n=n>this.settings.maxAngle/2?-n:n,t.css({transform:"rotateZ("+n+"deg)",width:i+"%",marginLeft:-i/2+"%"})},this.showImage=function(t,n){$(n).addClass("active"),i.generateRandomStylingForImage($(n))},this.init(),this.bindEvents()};